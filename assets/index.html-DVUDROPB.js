import{_ as s,c as a,a as i,o as n}from"./app-k1S79Pg5.js";const l={};function t(r,e){return n(),a("div",null,[...e[0]||(e[0]=[i(`<div class="hint-container warning"><p class="hint-container-title">注意</p><p>zabbix8.0支持的MySQL最低版本为8.04.00</p></div><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>zabbix7.4.0升级至8.0</p><p>数据库：mysql8.0.41升级至8.4.8</p><p>web服务器：apache</p><p>系统：RHEL8.7</p><p>mysql本地升级，mysql安装包下载请点击<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">mysql community</a></p><p>zabbix模板需单独导入，<a href="ttps://git.zabbix.com/projects/ZBX/repos/zabbix/browse/templates" target="_blank" rel="noopener noreferrer">zabbix模板</a></p></div><h2 id="升级mysql" tabindex="-1"><a class="header-anchor" href="#升级mysql"><span>升级mysql</span></a></h2><h3 id="停止服务" tabindex="-1"><a class="header-anchor" href="#停止服务"><span>停止服务</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>systemctl stop zabbix-server</span></span>
<span class="line"><span>systemctl stop mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="备份数据库" tabindex="-1"><a class="header-anchor" href="#备份数据库"><span>备份数据库</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>tar -cvf /root/mysql_data_bak_$(date +%F).tar /var/lib/mysql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="卸载旧mysql安装包" tabindex="-1"><a class="header-anchor" href="#卸载旧mysql安装包"><span>卸载旧mysql安装包</span></a></h3><p><mark class="tip">由于升级过程中出现对同一个文件的“所有权”冲突，故直接卸载旧安装包，不影响<code>/var/lib/mysql/</code>中的数据库文件</mark></p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>dnf remove mysql mysql-server mysql-common mysql-errmsg -y</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="安装mysql" tabindex="-1"><a class="header-anchor" href="#安装mysql"><span>安装mysql</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>yum localinstall mysql-community-client-8.4.8-1.el8.x86_64.rpm mysql-community-client-plugins-8.4.8-1.el8.x86_64.rpm  mysql-community-common-8.4.8-1.el8.x86_64.rpm mysql-community-icu-data-files-8.4.8-1.el8.x86_64.rpm  mysql-community-libs-8.4.8-1.el8.x86_64.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="启动并验证" tabindex="-1"><a class="header-anchor" href="#启动并验证"><span>启动并验证</span></a></h3><ul><li>启动mysql服务</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>systemctl start mysqld</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>检查版本</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>mysql -V</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="升级zabbix" tabindex="-1"><a class="header-anchor" href="#升级zabbix"><span>升级zabbix</span></a></h2><h3 id="停止服务-1" tabindex="-1"><a class="header-anchor" href="#停止服务-1"><span>停止服务</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>systemctl stop zabbix-server</span></span>
<span class="line"><span>systemctl stop zabbix-proxy</span></span>
<span class="line"><span>systemctl stop zabbix-agent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="备份配置文件及数据库" tabindex="-1"><a class="header-anchor" href="#备份配置文件及数据库"><span>备份配置文件及数据库</span></a></h3><ul><li>备份配置文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>mkdir /opt/zabbix-backup/</span></span>
<span class="line"><span>cp /etc/zabbix/zabbix_server.conf /opt/zabbix-backup/</span></span>
<span class="line"><span>cp /etc/httpd/conf.d/zabbix.conf  /opt/zabbix-backup/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>备份PHP 文件和 Zabbix 二进制文件</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>cp -R /usr/share/zabbix/ /opt/zabbix-backup/</span></span>
<span class="line"><span>cp -R /usr/share/zabbix-* /opt/zabbix-backup/</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更新存储库配置包" tabindex="-1"><a class="header-anchor" href="#更新存储库配置包"><span>更新存储库配置包</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>rpm -Uvh https://repo.zabbix.com/zabbix/8.0/release/rhel/9/noarch/zabbix-release-latest.el9.noarch.rpm</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>清理缓存</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>dnf clean all</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="升级zabbix组件" tabindex="-1"><a class="header-anchor" href="#升级zabbix组件"><span>升级zabbix组件</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>dnf install zabbix-server-mysql zabbix-web-mysql zabbix-apache-conf zabbix-sql-scripts zabbix-selinux-policy zabbix-agent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="启动进程" tabindex="-1"><a class="header-anchor" href="#启动进程"><span>启动进程</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>systemctl restart httpd</span></span>
<span class="line"><span>systemctl start zabbix-server</span></span>
<span class="line"><span>systemctl start zabbix-proxy</span></span>
<span class="line"><span>systemctl start zabbix-agent</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33)])])}const h=s(l,[["render",t]]),c=JSON.parse('{"path":"/os/linux/up2spelh/","title":"zabbix升级8.0 | Linux相关","lang":"zh-CN","frontmatter":{"title":"zabbix升级8.0","createTime":"2026/02/22 12:26:31","permalink":"/os/linux/up2spelh/","description":"注意 zabbix8.0支持的MySQL最低版本为8.04.00 相关信息 zabbix7.4.0升级至8.0 数据库：mysql8.0.41升级至8.4.8 web服务器：apache 系统：RHEL8.7 mysql本地升级，mysql安装包下载请点击mysql community zabbix模板需单独导入，zabbix模板 升级mysql 停止...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"zabbix升级8.0\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-05T08:54:28.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"http://git.x-echo.net/os/linux/up2spelh/"}],["meta",{"property":"og:site_name","content":"谈呀"}],["meta",{"property":"og:title","content":"zabbix升级8.0"}],["meta",{"property":"og:description","content":"注意 zabbix8.0支持的MySQL最低版本为8.04.00 相关信息 zabbix7.4.0升级至8.0 数据库：mysql8.0.41升级至8.4.8 web服务器：apache 系统：RHEL8.7 mysql本地升级，mysql安装包下载请点击mysql community zabbix模板需单独导入，zabbix模板 升级mysql 停止..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-05T08:54:28.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-05T08:54:28.000Z"}]]},"readingTime":{"minutes":1.15,"words":346},"git":{"createdTime":1770281135000,"updatedTime":1770281668000,"contributors":[{"name":"wyutan","username":"wyutan","email":"90786339+wyutan@users.noreply.github.com","commits":3,"avatar":"https://avatars.githubusercontent.com/wyutan?v=4","url":"https://github.com/wyutan"}],"changelog":[{"hash":"aef1acdf52368fe603be293d8740be45ee43d431","time":1770281668000,"email":"90786339+wyutan@users.noreply.github.com","author":"tanya","message":"Update 4.zabbix升级8.0.md"},{"hash":"056109bcba2a216920bb90bb1bdc308c1594c76d","time":1770281464000,"email":"90786339+wyutan@users.noreply.github.com","author":"tanya","message":"Update 4.zabbix升级8.0.md"},{"hash":"e9f689875fe685374bbe106e8e0bb64f691c789f","time":1770281135000,"email":"90786339+wyutan@users.noreply.github.com","author":"tanya","message":"Create 4.zabbix升级8.0.md"}]},"autoDesc":true,"filePathRelative":"os/linux/note/4.zabbix升级8.0.md","headers":[]}');export{h as comp,c as data};
